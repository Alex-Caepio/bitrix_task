
; /* Start:"a:4:{s:4:"full";s:87:"/bitrix/components/bitrix/landing.start/templates/.default/script.min.js?16845109291370";s:6:"source";s:68:"/bitrix/components/bitrix/landing.start/templates/.default/script.js";s:3:"min";s:72:"/bitrix/components/bitrix/landing.start/templates/.default/script.min.js";s:3:"map";s:72:"/bitrix/components/bitrix/landing.start/templates/.default/script.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");BX.Landing.PaymentAlert=function(n){if(typeof n.nodes==="undefined"){return}for(var t=0,e=n.nodes.length;t<e;t++){BX.bind(n.nodes[t],"click",function(t){BX.Landing.PaymentAlertShow(n);BX.PreventDefault(t)})}};BX.Landing.PaymentAlertShow=function(n){var t=BX.Landing.UI.Tool.ActionDialog.getInstance();var e=t.show({title:n.title?n.title:BX.message("LANDING_TPL_JS_PAY_TARIFF_TITLE"),content:'<div class="landing-payrate-popup-content"><span class="landing-payrate-popup-text">'+n.message+"</span></div>",confirm:BX.message("LANDING_TPL_JS_PAY_TARIFF"),contentColor:"grey",type:n.type||null});e.then(function(){top.window.location.href="/settings/license_all.php"},function(){})};BX.Landing.AlertShow=function(n){var t=BX.Landing.UI.Tool.ActionDialog.getInstance();var e=t.show({title:n.title?n.title:null,content:n.message,contentColor:"grey",type:n.type||null});e.then(function(){top.window.location.href="/settings/license_all.php"},function(){})};BX.ready(function(){var n=document.querySelectorAll(".bitrix24-metrika");if(!n){return}if(typeof BX.Landing.Metrika==="undefined"){return}var t=new BX.Landing.Metrika(true);for(var e=0,i=n.length;e<i;e++){BX.bind(n[e],"click",function(n){t.sendLabel(null,BX.data(this,"metrika24"),BX.data(this,"metrika24value"))}.bind(n[e]))}})})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:91:"/bitrix/components/bitrix/landing.site_edit/templates/.default/script.min.js?16845109294940";s:6:"source";s:72:"/bitrix/components/bitrix/landing.site_edit/templates/.default/script.js";s:3:"min";s:76:"/bitrix/components/bitrix/landing.site_edit/templates/.default/script.min.js";s:3:"map";s:76:"/bitrix/components/bitrix/landing.site_edit/templates/.default/script.map.js";}"*/
BX.namespace("BX.Landing");BX.Landing.EditComponent=function(){this.actionCloseId=BX("action-close");if(this.actionCloseId){BX.bind(this.actionCloseId,"click",BX.delegate(this.actionClose,this))}};BX.Landing.EditComponent.prototype={actionClose:function(){if(typeof top.BX.SidePanel!=="undefined"){setTimeout(function(){top.BX.SidePanel.Instance.close()},300);top.BX.SidePanel.Instance.postMessage(window,"landingEditClose",{})}}};BX.Landing.SelectColor=function(e){this.id=e.id?e.id:"";this.options=e.options?e.options:[];this.value=e.value?e.value:"";this.DOM={}};BX.Landing.SelectColor.prototype={show:function(){this.checkValue();this.initSectionSelector()},checkValue:function(){if(!this.options[this.value]){this.value=Object.keys(this.options)[0]}},initSectionSelector:function(){this.DOM.sectionWrap=BX(this.id+"_select_color_wrap");this.DOM.sectionInput=BX(this.id+"_select_color");this.DOM.sectionSelect=this.DOM.sectionWrap.appendChild(BX.create("DIV",{props:{className:"select-color-field"}}));this.DOM.sectionSelectInner=this.DOM.sectionSelect.appendChild(BX.create("DIV",{props:{className:"select-color-field-icon"},style:{backgroundColor:this.options[this.value].color}}));this.DOM.sectionSelectInnerText=this.DOM.sectionSelect.appendChild(BX.create("SPAN",{text:this.options[this.value].name}));BX.bind(this.DOM.sectionSelect,"click",n);var e=this,t=this.options;function n(){if(e.sectionMenu&&e.sectionMenu.popupWindow&&e.sectionMenu.popupWindow.isShown()){return e.sectionMenu.close()}var n,o=[],i;for(var s in t){o.push({id:"bx-select-color-option-"+s,text:BX.util.htmlspecialchars(t[s].name),color:t[s].color,className:"select-color-popup-menu-item "+(t[s].class?t[s].class:""),onclick:function(n){return function(){var o=t[n];e.DOM.sectionInput.value=n;e.DOM.sectionSelectInner.style.backgroundColor=o.color;e.DOM.sectionSelectInnerText.innerHTML=BX.util.htmlspecialchars(o.name);e.sectionMenu.close()}}(s)})}e.sectionMenu=BX.PopupMenu.create("selectColor"+e.id,e.DOM.sectionSelect,o,{closeByEsc:true,autoHide:true,offsetTop:0,offsetLeft:0});e.sectionMenu.popupWindow.contentContainer.style.maxHeight="300px";e.sectionMenu.popupWindow.setWidth(e.DOM.sectionSelect.offsetWidth-2);e.sectionMenu.show();for(n=0;n<e.sectionMenu.menuItems.length;n++){if(e.sectionMenu.menuItems[n].layout.item){i=e.sectionMenu.menuItems[n].layout.item.querySelector(".menu-popup-item-icon");if(i){i.style.backgroundColor=e.sectionMenu.menuItems[n].color}}}BX.addClass(e.DOM.sectionSelect,"active");BX.addCustomEvent(e.sectionMenu.popupWindow,"onPopupClose",function(){BX.removeClass(e.DOM.sectionSelect,"active");e.sectionMenu=null;BX.PopupMenu.destroy("selectColor"+e.id)})}}};BX.Landing.SelectLang=function(e){this.id=e.id?e.id:"";this.options=e.options?e.options:[];this.value=e.value?e.value:"";this.DOM={}};BX.Landing.SelectLang.prototype={show:function(){this.initSectionSelector()},initSectionSelector:function(){this.DOM.sectionWrap=BX(this.id+"_select_lang_wrap");this.DOM.sectionInput=BX(this.id+"_select_lang");this.DOM.sectionSelect=this.DOM.sectionWrap.appendChild(BX.create("DIV",{props:{className:"select-lang-field"}}));this.DOM.sectionSelectInnerText=this.DOM.sectionSelect.appendChild(BX.create("SPAN",{text:this.options[this.value]}));BX.bind(this.DOM.sectionSelect,"click",n);var e=this,t=this.options;function n(){if(e.sectionMenu&&e.sectionMenu.popupWindow&&e.sectionMenu.popupWindow.isShown()){return e.sectionMenu.close()}var n=[];for(var o in t){n.push({id:"bx-select-color-option-"+o,text:BX.util.htmlspecialchars(t[o]),className:"language-icon menu-popup-no-icon",onclick:function(n){return function(){var o=t[n];e.DOM.sectionInput.value=n;e.DOM.sectionSelectInnerText.innerHTML=BX.util.htmlspecialchars(o);e.sectionMenu.close()}}(o)})}e.sectionMenu=BX.PopupMenu.create("selectLang"+e.id,e.DOM.sectionSelect,n,{closeByEsc:true,autoHide:true,offsetTop:0,offsetLeft:0});e.sectionMenu.popupWindow.contentContainer.style.maxHeight="300px";e.sectionMenu.popupWindow.setWidth(e.DOM.sectionSelect.offsetWidth-2);e.sectionMenu.show();BX.addClass(e.DOM.sectionSelect,"active");BX.addCustomEvent(e.sectionMenu.popupWindow,"onPopupClose",function(){BX.removeClass(e.DOM.sectionSelect,"active");e.sectionMenu=null;BX.PopupMenu.destroy("selectLang"+e.id)})}}};BX.ready(function(){var e=[].slice.call(document.querySelectorAll(".landing-frame-btn"));for(var t=0,n=e.length;t<n;t++){BX.bind(e[t],"click",function(){top.BX.SidePanel.Instance.open(this.getAttribute("href"),{width:1e3,allowChangeHistory:false,events:{onClose:function(e){if(e.slider.url.indexOf("save=Y")!==-1||e.slider.url.indexOf("switch=Y")!==-1){window.location.reload()}}}});BX.PreventDefault()})}var o=document.getElementById("link-all-colors");if(o){o.addEventListener("click",i)}function i(){var e=document.getElementById("set-colors");for(var t=0;t<e.childNodes.length;t++){e.childNodes[t].hidden=false}o.hidden=true}});
/* End */
;
; /* Start:"a:4:{s:4:"full";s:99:"/bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.min.js?168451092922130";s:6:"source";s:79:"/bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.js";s:3:"min";s:83:"/bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.min.js";s:3:"map";s:83:"/bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.map.js";}"*/
function deleteAccessRow(e){landingAccessSelected[BX.data(BX(e),"id")]=false;BX.remove(BX.findParent(BX(e),{tag:"tr"},true))}(function(){"use strict";BX.namespace("BX.Landing");var e=BX.Landing.Utils.slice;var t=BX.Landing.Utils.proxy;var i=BX.Landing.Utils.bind;var n=BX.Landing.Utils.unbind;var o=BX.Landing.Utils.addClass;var s=BX.Landing.Utils.removeClass;var a=BX.Landing.Utils.isNumber;var r=BX.Landing.Utils.style;var l=BX.Landing.Utils.data;BX.Landing.ColorPalette=function(e){this.themesPalete=document.querySelector(".landing-template-themes");this.themesSiteCustomColorNode=document.querySelector(".landing-template-custom-color");this.init();return this};BX.Landing.ColorPalette.getInstance=function(e){return BX.Landing.ColorPalette.instance||(BX.Landing.ColorPalette.instance=new BX.Landing.ColorPalette(e))};BX.Landing.ColorPalette.prototype={init:function(){var t=e(this.themesPalete.children);if(this.themesSiteColorNode){t=t.concat(e(this.themesSiteColorNode.children))}if(this.themesSiteCustomColorNode){t=t.concat(e(this.themesSiteCustomColorNode.children))}t.forEach(this.initSelectableItem,this);if(this.siteGroupPalette){var n=e(this.siteGroupPalette.children);n.forEach(this.initSelectableItem,this)}i(this.previewFrame,"load",this.onFrameLoad);i(this.closeButton,"click",this.onCancelButtonClick);if(!this.disableClickHandler){i(this.createButton,"click",this.onCreateButtonClick)}this.setColor()},setColor:function(e){if(e===undefined){this.color=l(this.getActiveColorNode(),"data-value")}else{this.color=e}var t=document.getElementById("colorpicker");if(t){t.setAttribute("value",this.color)}},getActiveColorNode:function(){var e=this.themesPalete.querySelector(".active");if(!e&&this.themesSiteColorNode){e=this.themesSiteColorNode.querySelector(".active")}if(!e&&this.themesSiteCustomColorNode){e=this.themesSiteCustomColorNode.querySelector(".active")}if(!e){e=this.themesPalete.firstElementChild}return e},getActiveSiteGroupItem:function(){return this.siteGroupPalette.querySelector(".active")},loadPreview:function(e){return function(){return new Promise(function(t){if(this.previewFrame.src!==e){this.previewFrame.src=e;this.previewFrame.onload=function(){t(this.previewFrame)}.bind(this);return}t(this.previewFrame)}.bind(this))}.bind(this)},showLoader:function(){return new Promise(function(e){void this.loader.show(this.loaderContainer);o(this.imageContainer,"landing-template-preview-overlay");e()}.bind(this))},hideLoader:function(){return function(e){return new Promise(function(t){void this.loader.hide();s(this.imageContainer,"landing-template-preview-overlay");t(e)}.bind(this))}.bind(this)},delay:function(e){e=a(e)?e:0;return function(t){return new Promise((function(i){setTimeout(i.bind(null,t),e)}))}},getValue:function(){var e={};if(this.themesSiteColorNode&&this.getActiveColorNode().parentElement===this.themesSiteColorNode){e[l(this.themesSiteColorNode,"data-name")]="Y"}if(this.siteGroupPalette){e[l(this.siteGroupPalette,"data-name")]=l(this.getActiveSiteGroupItem(),"data-value")}e[l(this.themesPalete,"data-name")]=l(this.getActiveColorNode(),"data-value");e[l(this.themesSiteCustomColorNode,"data-name")]=l(this.getActiveColorNode(),"data-value");e[l(this.title,"data-name")]=this.title.value;e[l(this.description,"data-name")]=this.description.value;return e},onCancelButtonClick:function(e){e.preventDefault();top.BX.SidePanel.Instance.close()},onCreateButtonClick:function(e){e.preventDefault();if(this.isStore()&&this.IsLoadedFrame){this.loaderText=BX.create("div",{props:{className:"landing-template-preview-loader-text"},text:this.messages.LANDING_LOADER_WAIT});this.progressBar=new BX.UI.ProgressBar({column:true});this.progressBar.getContainer().classList.add("ui-progressbar-landing-preview");this.loaderContainer.appendChild(this.loaderText);this.loaderContainer.appendChild(this.progressBar.getContainer())}if(this.isStore()){if(this.IsLoadedFrame){this.showLoader();this.initCatalogParams();this.createCatalog()}}else{this.showLoader().then(this.delay(200)).then(function(){this.finalRedirectAjax(this.getCreateUrl())}.bind(this))}},initSelectableItem:function(e){i(e,"click",t(this.onSelectableItemClick,this))},onSelectableItemClick:function(e){e.preventDefault();if(e.currentTarget.parentElement===this.themesPalete||this.themesSiteColorNode&&e.currentTarget.parentElement===this.themesSiteColorNode||this.themesSiteCustomColorNode&&e.currentTarget.parentElement===this.themesSiteCustomColorNode){if(e.currentTarget.hasAttribute("data-value")){s(this.getActiveColorNode(),"active");o(e.currentTarget,"active");this.setColor(l(e.currentTarget,"data-value"))}}},isStore:function(){return this.createStore}};BX.Landing.EditTitleForm=function(e,t,i,n){this.btn=e.querySelector(".ui-title-input-btn-js");this.label=e.querySelector(".ui-editable-field-label-js");this.input=e.querySelector(".ui-editable-field-input-js");this.additionalWidth=t||0;this.input.IsWidthSet=false;this.display=n;this.hideInput=this.hideInput.bind(this);this.showInput=this.showInput.bind(this);if(i){BX.bind(e,"click",this.showInput)}else{BX.bind(this.btn,"click",this.showInput)}this.input.setAttribute("data-height",this.label.offsetHeight)};BX.Landing.EditTitleForm.prototype={showInput:function(e){e.stopPropagation();if(!this.input.IsWidthSet){this.input.style.width=this.label.offsetWidth+this.additionalWidth+17+"px"}if(this.input.tagName==="TEXTAREA"){this.input.style.height=this.input.getAttribute("data-height")+"px"}this.label.style.display="none";this.btn.style.display="none";this.input.style.display="block";this.input.focus();this.input.IsWidthSet=true;BX.bind(document,"mousedown",this.hideInput)},hideInput:function(e){if(e.target===this.input)return;this.label.textContent=this.input.value;if(this.display){this.label.style.display="inline-block"}else{this.label.style.display="inline"}this.input.style.display="none";this.btn.style.display="inline-block";this.input.IsWidthSet=false;this.input.setAttribute("data-height",this.label.offsetHeight);BX.unbind(document,"mousedown",this.hideInput)}};BX.Landing.ToggleFormFields=function(e){this.form=e;this.toggleBtn=e.querySelector(".landing-form-collapse-block-js");this.formInner=e.querySelector(".landing-form-inner-js");this.tableWparp=e.querySelector(".landing-form-table-wrap-js");this.sectionWrap=e.querySelector(".landing-additional-alt-promo-wrap");this.startHeight=0;this.endHeight=0;this.isHidden=true;this.clickHandler=this.clickHandler.bind(this);this.setHeightAuto=this.setHeightAuto.bind(this);this.removeClassName=this.removeClassName.bind(this);this.attributeMainOption="data-landing-main-option";this.attributeOption="data-landing-additional-option";this.attributeDetail="data-landing-additional-detail";var t=this.sectionWrap.children;t=BX.convert.nodeListToArray(t);t.forEach(this.initSection,this);BX.bind(this.toggleBtn,"click",this.clickHandler);if(window.location.hash){var i=window.location.hash.substr(1);t.forEach((function(e){var t=e.getAttribute(this.attributeOption);if(t===i){BX.fireEvent(e,"click")}}),this);var n=this.formInner.querySelector("["+this.attributeMainOption+'="'+i+'"]');if(n){this.highlightSection(n)}}};BX.Landing.ToggleFormFields.prototype={showRows:function(){this.startHeight=this.formInner.offsetHeight;this.formInner.style.height=this.startHeight+"px";this.form.classList.add("landing-form-collapsed-open");this.endHeight=this.tableWparp.offsetHeight+parseInt(BX.style(this.tableWparp,"marginBottom"));this.formInner.style.height=this.endHeight+"px";BX.bind(this.formInner,"transitionend",this.setHeightAuto);this.isHidden=false},closeRows:function(){this.formInner.style.height=this.endHeight+"px";setTimeout(function(){this.formInner.style.height=this.startHeight+"px"}.bind(this),70);BX.bind(this.formInner,"transitionend",this.removeClassName);this.isHidden=true},clickHandler:function(){if(this.isHidden)this.showRows();else this.closeRows()},setHeightAuto:function(){this.formInner.style.height="auto";BX.unbind(this.formInner,"transitionend",this.setHeightAuto)},removeClassName:function(){this.form.classList.remove("landing-form-collapsed-open");BX.unbind(this.formInner,"transitionend",this.removeClassName)},initSection:function(e){BX.bind(e,"click",BX.delegate((function(t){t.stopPropagation();this.showSection(e)}),this))},showSection:function(e){this.showRows();var t=e.getAttribute(this.attributeOption);var i=this.formInner.querySelector("["+this.attributeDetail+'="'+t+'"]');this.highlightSection(i)},highlightSection:function(e){BX.addClass(e,"landing-form-hidden-row-highlight");setTimeout((function(){var t=BX.pos(e);window.scrollTo({top:t.top,behavior:"smooth"})}),300);setTimeout((function(){BX.removeClass(e,"landing-form-hidden-row-highlight")}),1500)}};BX.Landing.ColorPicker=function(e){this.picker=new BX.ColorPicker({bindElement:e,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onColorSelected.bind(this),colors:this.setColors()});this.input=e;this.colorPickerNode=e.parentElement;BX.addClass(this.colorPickerNode,"ui-colorpicker");this.colorIcon=BX.create("span",{props:{className:"ui-colorpicker-color"}});BX.insertBefore(this.colorIcon,this.input);this.colorValue=e.value;if(this.colorValue){BX.adjust(this.colorIcon,{attrs:{style:"background-color:"+this.colorValue}});BX.addClass(this.colorPickerNode,"ui-colorpicker-selected")}this.clearBtn=BX.create("span",{props:{className:"ui-colorpicker-clear"}});BX.insertAfter(this.clearBtn,this.input);BX.bind(this.colorPickerNode,"click",this.show.bind(this));BX.bind(this.clearBtn,"click",this.clear.bind(this))};BX.Landing.ColorPicker.prototype={onColorSelected:function(e){this.colorPickerNode.classList.add("ui-colorpicker-selected");this.colorIcon.style.backgroundColor=e;this.input.value=e},show:function(e){if(e.target==this.clearBtn){return}this.picker.open()},clear:function(){this.colorPickerNode.classList.remove("ui-colorpicker-selected");this.input.value="";this.picker.setSelectedColor(null)},setColors:function(){return[["#f5f5f5","#eeeeee","#e0e0e0","#9e9e9e","#757575","#616161","#212121"],["#cfd8dc","#b0bec5","#90a4ae","#607d8b","#546e7a","#455a64","#263238"],["#d7ccc8","#bcaaa4","#a1887f","#795548","#6d4c41","#5d4037","#3e2723"],["#ffccbc","#ffab91","#ff8a65","#ff5722","#f4511e","#e64a19","#bf360c"],["#ffe0b2","#ffcc80","#ffb74d","#ff9800","#fb8c00","#f57c00","#e65100"],["#ffecb3","#ffe082","#ffd54f","#ffc107","#ffb300","#ffa000","#ff6f00"],["#fff9c4","#fff59d","#fff176","#ffeb3b","#fdd835","#fbc02d","#f57f17"],["#f0f4c3","#e6ee9c","#dce775","#cddc39","#c0ca33","#afb42b","#827717"],["#dcedc8","#c5e1a5","#aed581","#8bc34a","#7cb342","#689f38","#33691e"],["#c8e6c9","#a5d6a7","#81c784","#4caf50","#43a047","#388e3c","#1b5e20"],["#b2dfdb","#80cbc4","#4db6ac","#009688","#00897b","#00796b","#004d40"],["#b2ebf2","#80deea","#4dd0e1","#00bcd4","#00acc1","#0097a7","#006064"],["#b3e5fc","#81d4fa","#4fc3f7","#03a9f4","#039be5","#0288d1","#01579b"],["#bbdefb","#90caf9","#64b5f6","#2196f3","#1e88e5","#1976d2","#0d47a1"],["#c5cae9","#9fa8da","#7986cb","#3f51b5","#3949ab","#303f9f","#1a237e"],["#d1c4e9","#b39ddb","#9575cd","#673ab7","#5e35b1","#512da8","#311b92"],["#e1bee7","#ce93d8","#ba68c8","#9c27b0","#8e24aa","#7b1fa2","#4a148c"],["#f8bbd0","#f48fb1","#f06292","#e91e63","#d81b60","#c2185b","#880e4f"],["#ffcdd2","#ef9a9a","#e57373","#f44336","#e53935","#d32f2f","#b71c1c"]].map((function(e,t,i){return i.map((function(e){return e[t]}))}))}};BX.Landing.CustomFields=function(e){e.forEach((function(e){BX.bind(e.field,"keyup",(function(){if(e.length){if(e.field.value.length<=e.length){e.node.textContent=e.field.value}else{e.node.textContent=e.field.value.substring(0,e.length)}}else{e.node.textContent=e.field.value}}))}))};BX.Landing.Favicon=function(){var e=BX("landing-form-favicon-change");var t=BX("landing-form-favicon-input");var i=BX("landing-form-favicon-value");var n=BX("landing-form-favicon-form");var o=BX("landing-form-favicon-src");var s=BX("landing-form-favicon-error");if(!n||!t||!e){return}BX.bind(e,"click",(function(e){BX.fireEvent(t,"click");BX.PreventDefault(e)}));BX.bind(t,"change",(function(e){BX.ajax.submitAjax(n,{method:"POST",dataType:"json",onsuccess:function(e){if(e.type==="success"&&typeof e.result!=="undefined"&&e.result!==false){i.value=e.result.id;o.setAttribute("src",e.result.src)}else{s.style.color="red"}}});BX.PreventDefault(e)}))};BX.Landing.Custom404=function(){var e=BX("landing-form-404-select");BX.bind(e,"change",(function(){if(this.value===""){this.parentNode.style.height=getComputedStyle(this.parentNode).height;BX("checkbox-404-use").checked=false}}));BX.bind(BX("checkbox-404-use"),"change",(function(){if(!this.checked){e.value=""}}))};BX.Landing.Custom503=function(){var e=BX("landing-form-503-select");if(!e){return}BX.bind(e,"change",(function(){if(this.value===""){this.parentNode.style.height=getComputedStyle(this.parentNode).height;BX("checkbox-503-use").checked=false}}));BX.bind(BX("checkbox-503-use"),"change",(function(){if(!this.checked){e.value=""}}))};BX.Landing.Copyright=function(){BX.bind(BX("checkbox-copyright"),"change",(function(){var e=BX("landing-site-set-form").getAttribute("action");e=e.replace(/&feature_copyright=[YN]/,"");e+="&feature_copyright="+(this.checked?"Y":"N");BX("landing-site-set-form").setAttribute("action",e)}))};BX.Landing.Access=function(e){var t=landingAccessSelected;var i="RIGHTS";var n=BX("landing-"+i.toLowerCase()+"-table");var o=e.select;var s=e.inc;BX.Access.Init({other:{disabled_cr:true}});BX.Access.SetSelected(t,i);function a(){BX.Access.ShowForm({callback:function(e){for(var a in e){if(e.hasOwnProperty(a)){for(var r in e[a]){if(e[a].hasOwnProperty(r)){var l=n.rows.length;var c=n.insertRow(l-1);c.classList.add("landing-form-rights");t[r]=true;c.insertCell(-1);c.insertCell(-1);c.cells[0].innerHTML=BX.Access.GetProviderName(a)+" "+BX.util.htmlspecialchars(e[a][r].name)+":"+'<input type="hidden" name="fields['+i+'][ACCESS_CODE][]" value="'+r+'">';c.cells[0].classList.add("landing-form-rights-right");c.cells[1].classList.add("landing-form-rights-left");c.cells[1].innerHTML=o.replace("#inc#",s++)+" "+'<a href="javascript:void(0);" onclick="deleteAccessRow(this);" data-id="'+r+'" class="landing-form-rights-delete"></a>'}}}}},bind:i})}BX("landing-rights-form").addEventListener("click",a.bind(this))};BX.Landing.Layout=function(e){var t=document.querySelector(".landing-form-layout-block-container");var i=[];var n=document.querySelectorAll(".landing-form-layout-item");var o=document.querySelector(".landing-form-layout-detail");var s=document.querySelector(".landing-form-page-layout");var a=document.getElementById("field-gacounter_send_click-use");var r=document.getElementById("field-gacounter_click_type-use");n=Array.prototype.slice.call(n,0);e.messages=e.messages||{};h(n[0].dataset.block);n.forEach((function(e){e.addEventListener("click",l.bind(this))}));function l(e){var t=e.target.parentNode;var i=document.querySelector(".landing-form-layout-item-selected");if(i){i.classList.remove("landing-form-layout-item-selected")}c(t.dataset.block,t.dataset.layout)}function c(e,t){s.classList.remove("landing-form-page-layout-short");o.classList.remove("landing-form-layout-detail-hidden");h(e);if(typeof t!=="undefined"){d(t)}BX("layout-tplrefs").value=""}if(typeof e.areasCount!=="undefined"){c(e.areasCount,e.current)}function d(e){var t=document.querySelectorAll(".landing-form-layout-img");for(var i=0;i<t.length;i++){if(t[i].dataset.layout===e){t[i].style.display="block"}else{t[i].style.display="none"}}}function h(n){var o=BX("layout-tplrefs").value.split(",");i=[];t.innerHTML="";var s=function(){var e="";for(var t=0,n=i.length;t<n;t++){e+=t+1+":"+(i[t].getValue()?i[t].getValue().substr(8):0)+","}BX("layout-tplrefs").value=e};for(var a=0;a<n;a++){var r=BX.create("div",{attrs:{className:"landing-form-layout-block-item"}});var l=a+1;var c="";if(typeof o[a]!=="undefined"&&o[a].indexOf(":")!==-1){c=parseInt(o[a].split(":")[1]);if(c>0){c="#landing"+c}else{c=""}}var d=new BX.Landing.UI.Field.LinkURL({title:e.messages.area+" #"+l,content:c,textOnly:true,disableCustomURL:true,disableBlocks:true,disallowType:true,enableAreas:true,allowedTypes:[BX.Landing.UI.Field.LinkURL.TYPE_PAGE],options:{siteId:e.siteId,landingId:e.landingId,filter:{"=TYPE":e.type}},onInit:BX.delegate(s),onInput:BX.delegate(s)});i[a]=d;r.appendChild(d.layout);t.appendChild(r)}}var u=BX("layout-tplrefs-check");u.addEventListener("click",f.bind(this));function f(){BX("layout-tplrefs").value="";o.classList.add("landing-form-layout-detail--hidden");s.classList.add("landing-form-page-layout-short");var e=document.querySelectorAll(".layout-switcher");e=Array.prototype.slice.call(e,0);e.forEach((function(e){e.checked=false}))}var g=document.querySelector(".landing-form-select-buttons");var p=document.querySelector(".landing-form-list-inner");g.addEventListener("click",m.bind(this));function m(e){if(e.target.classList.contains("landing-form-select-next")){p.classList.add("landing-form-list-inner-prev")}else{p.classList.remove("landing-form-list-inner-prev")}}function b(){var e=a.closest(".ui-checkbox-hidden-input-inner");if(a.checked){r.classList.add("ui-select-gacounter-show");e.classList.add("ui-checkbox-hidden-input-inner-gacounter")}else{r.classList.remove("ui-select-gacounter-show");e.classList.remove("ui-checkbox-hidden-input-inner-gacounter")}}if(a){a.addEventListener("click",function(){b()}.bind(this));b()}};BX.Landing.ExternalMetrika=function(){if(!BX("field-gacounter_counter-use")){return}var e=BX("field-gacounter_counter-use");var t=BX("field-gacounter_send_click-use");var i=BX("field-gacounter_send_show-use");if(e.value===""){t.disabled=true;i.disabled=true}e.addEventListener("input",n.bind(this));function n(){if(e.value===""){t.disabled=true;t.checked=false;i.disabled=true;i.checked=false}else{t.disabled=false;i.disabled=false}}};BX.Landing.SaveBtn=function(e){e.addEventListener("click",t.bind(this));function t(){e.classList.add("ui-btn-clock");e.style.cursor="default";e.style.pointerEvents="none"}};BX.Landing.IblockSelect=function(){this.section=BX("row_section_id");this.init(this.section)};BX.Landing.IblockSelect.prototype={init:function(e){if(!BX("settings_iblock_id").value){e.classList.add("landing-form-field-section-hidden")}else{e.classList.remove("landing-form-field-section-hidden")}}};BX.Landing.Cookies=function(e){this.bgPickerBtn=document.querySelector(".landing-form-cookies-color-bg");this.textPickerBtn=document.querySelector(".landing-form-cookies-color-text");this.simplePreview=document.querySelector(".landing-form-cookies-settings-type-simple");this.advancedPreview=document.querySelector(".landing-form-cookies-settings-type-advanced");this.positions=document.querySelectorAll(".landing-form-cookies-position-item");this.inputApp=document.querySelector("#radio-cookies-mode-A");this.inputInfo=document.querySelector("#radio-cookies-mode-I");this.settings=document.querySelector(".landing-form-cookies-settings-wrapper");this.bgPicker=new BX.ColorPicker({bindElement:this.bgPickerBtn,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onBgColorSelected.bind(this),colors:BX.Landing.ColorPicker.prototype.setColors()});this.textPicker=new BX.ColorPicker({bindElement:this.textPickerBtn,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onTextColorSelected.bind(this),colors:BX.Landing.ColorPicker.prototype.setColors()});this.setSelectedBgColor(this.bgPickerBtn.value);this.setSelectedTextColor(this.textPickerBtn.value);this.hideCookiesSettings(this.inputInfo);this.bindEvents()};BX.Landing.Cookies.prototype={bindEvents:function(){this.positions.forEach(function(e){e.addEventListener("click",this.onSelectCookiesPosition.bind(this))}.bind(this));this.bgPickerBtn.addEventListener("click",this.showBgPicker.bind(this));this.textPickerBtn.addEventListener("click",this.showTextPicker.bind(this));this.inputInfo.addEventListener("change",this.hideCookiesSettings.bind(this));this.inputApp.addEventListener("change",this.showCookiesSettings.bind(this))},onBgColorSelected:function(){var e=this.bgPicker.getSelectedColor();this.setSelectedBgColor(e)},onTextColorSelected:function(){var e=this.textPicker.getSelectedColor();this.setSelectedTextColor(e)},onSelectCookiesPosition:function(e){this.positions.forEach(function(e){if(e.classList.contains("landing-form-cookies-position-item-selected")){e.classList.remove("landing-form-cookies-position-item-selected")}}.bind(this));e.currentTarget.classList.add("landing-form-cookies-position-item-selected")},showBgPicker:function(){this.bgPicker.open()},showTextPicker:function(){this.textPicker.open()},setSelectedBgColor:function(e){this.bgPickerBtn.style.background=e;this.bgPickerBtn.value=e;this.simplePreview.style.background=e;this.advancedPreview.style.background=e},setSelectedTextColor:function(e){this.textPickerBtn.style.background=e;this.textPickerBtn.value=e;this.advancedPreview.style.color=e;var t=document.querySelectorAll(".landing-form-cookies-settings-preview-svg");t.forEach((function(t){t.style.fill=e}))},hideCookiesSettings:function(e){var t;if(e.target){t=e.target.closest(".ui-checkbox-hidden-input-inner")}else{t=e.closest(".ui-checkbox-hidden-input-inner")}if(this.inputInfo.checked){t.style.height="330px";this.settings.style.opacity="0"}},showCookiesSettings:function(e){var t=e.target.closest(".ui-checkbox-hidden-input-inner");if(this.inputApp.checked){t.style.height="617px";this.settings.style.opacity="1"}}};BX.Landing.B24ButtonColor=function(e,t){this.colorCustomType="custom";this.typeControl=e;this.valueControl=t;this.valueControlWrap=BX.findParent(t,{class:"ui-control-wrap"});i(e,"change",BX.delegate(this.checkVisibility,this));this.checkVisibility()};BX.Landing.B24ButtonColor.prototype={checkVisibility:function(){if(this.typeControl.value==="custom"){this.valueControlWrap.hidden=false}else{this.valueControlWrap.hidden=true}}};BX.Landing.NeedPublicationField=function(e){e.forEach((function(e){var t=BX(e);if(t){BX.bind(t,"click",(function(){BX.UI.Dialogs.MessageBox.alert(BX.message("LANDING_EDIT_NEED_PUBLICATION"))}))}}))}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:99:"/bitrix/components/bitrix/main.userconsent.selector/templates/.default/script.min.js?16845109252937";s:6:"source";s:80:"/bitrix/components/bitrix/main.userconsent.selector/templates/.default/script.js";s:3:"min";s:84:"/bitrix/components/bitrix/main.userconsent.selector/templates/.default/script.min.js";s:3:"map";s:84:"/bitrix/components/bitrix/main.userconsent.selector/templates/.default/script.map.js";}"*/
var MainUserConsentSelectorManager=function(e){this.selectors=[];this.init=function(e){this.actionRequestUrl=e.actionRequestUrl;this.initSlider();var t=document.querySelectorAll("[data-bx-user-consent-selector]");t=BX.convert.nodeListToArray(t);t.forEach(this.initByContext,this)};this.initByContext=function(e){var t=e.querySelector("select[data-bx-selector]");var i=e.querySelector("a[data-bx-link-edit]");var n=e.querySelector("a[data-bx-link-view]");if(!t||!i||!n){return}this.selectors.push(t);BX.bind(t,"change",this.onChange.bind(this,t,i,n));this.onChange(t,i,n);this.initSliderButtons(e)};this.onChange=function(e,t,i){t.style.display=e.value?"":"none";i.style.display=e.value?"":"none";this.fillHrefByTemplate(t,e.value);this.fillHrefByTemplate(i,e.value)};this.fillHrefByTemplate=function(e,t){var i=e.getAttribute("data-bx-link-tmpl");if(!i){return}e.href=i.replace(new RegExp("#id#","g"),t)};this.fillDropDownControl=function(e,t,i){t=t||[];var n=e.children[0];e.innerHTML="";if(i&&n){e.appendChild(n)}t.forEach(function(t){if(!t||!t.caption){return}var i=document.createElement("option");i.value=t.value;i.selected=!!t.selected;i.innerText=t.caption;e.appendChild(i)})};this.initSliderButtons=function(e){var t=e.querySelectorAll("[data-bx-slider-href]");t=BX.convert.nodeListToArray(t);t.forEach(this.slider.bindOpen,this.slider)};this.initSlider=function(){this.slider.caller=this;top.BX.addCustomEvent(top,"main-user-consent-to-list",function(){top.BX.SidePanel.Instance.close()})};this.onSliderClose=function(){this.sendActionRequest("getAgreements",{},function(e){if(!e.list){return}this.selectors.forEach(function(t){var i=t.value;if(!i){i=e.list[0].ID}var n=e.list.map(function(e){return{caption:e.NAME,value:e.ID,selected:(e.ID||"").toString()===i}});this.fillDropDownControl(t,n,true);BX.fireEvent(t,"change")},this)})};this.slider={caller:null,init:function(e){top.BX.SidePanel.Instance.bindAnchors({rules:[{condition:e.condition,loader:e.loader,stopParameters:[]}]})},onSaved:function(){this.onClose();top.BX.SidePanel.Instance.close()},onClose:function(){if(this.caller){this.caller.onSliderClose()}},bindOpen:function(e){BX.bind(e,"click",this.openHref.bind(this,e))},openHref:function(e,t){t.preventDefault();this.open(e.getAttribute("href"),e.getAttribute("data-bx-slider-reload"))},open:function(e,t){top.BX.SidePanel.Instance.open(e,{cacheable:false,events:{}});if(t){top.BX.addCustomEvent(top,"main-user-consent-saved",this.onSaved.bind(this))}}};this.sendActionRequest=function(e,t,i,n){i=i||null;n=n||null;t.action=e;t.sessid=BX.bitrix_sessid();t.action=e;BX.ajax({url:this.actionRequestUrl,method:"POST",data:t,timeout:10,dataType:"json",processData:true,onsuccess:BX.proxy(function(e){e=e||{};if(e.error){n.apply(this,[e])}else if(i){i.apply(this,[e])}},this),onfailure:BX.proxy(function(){var e={error:true,text:""};if(n){n.apply(this,[e])}},this)})};this.init(e)};
/* End */
;; /* /bitrix/components/bitrix/landing.start/templates/.default/script.min.js?16845109291370*/
; /* /bitrix/components/bitrix/landing.site_edit/templates/.default/script.min.js?16845109294940*/
; /* /bitrix/components/bitrix/landing.site_edit/templates/.default/landing-forms.min.js?168451092922130*/
; /* /bitrix/components/bitrix/main.userconsent.selector/templates/.default/script.min.js?16845109252937*/

//# sourceMappingURL=template_ec951d79aa7ed6119e3219ec55e29938.map.js